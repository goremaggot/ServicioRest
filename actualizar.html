<!DOCTYPE html>
<!--[if lt IE 7]><html class="lt-ie9 lt-ie8 lt-ie7"><![endif]-->
<!--[if IE 7]><html class="lt-ie9 lt-ie8"><![endif]-->
<!--[if IE 8]><html class="lt-ie9"><![endif]-->
<!--[if gt IE 8]><!--><html><!--<![endif]-->
<head>
<title>Actualizar Solicitud</title>
<meta charset="utf-8">
<link rel="stylesheet" href="css/foundation.min.css">
<link rel="stylesheet" href="css/superfish.css">
<link rel="stylesheet" href="css/stylesheet.css">
<link rel="stylesheet" href="js/slider/flexslider.css">
<link rel="stylesheet" href="js/slider/flexcar.css">
<link href='http://fonts.googleapis.com/css?family=Quando' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Droid+Sans:400,300|Droid+Serif:400,300' rel='stylesheet' type='text/css'>
<!-- <script src="js/vendor/custom.modernizr.js"></script> -->
<script>
function consultar(){

var idsol = document.getElementById("element_1").value;

var baseurl= "http://127.0.0.1:8000/api/banco/data/credit/"+idsol;
console.log("Entra Actualizar");
console.log(baseurl);
var xmlhttp = new XMLHttpRequest();
xmlhttp.open("GET",baseurl,true);
xmlhttp.send();
xmlhttp.onreadystatechange=function(){
  console.log("xmlhttp.status "+xmlhttp.status);
if (xmlhttp.readyState===4 && xmlhttp.status===200){
var solicitud = JSON.parse(xmlhttp.responseText);
var idsol = document.getElementById("element_1");
var ciudad = document.getElementById("element_7");
var dep = document.getElementById("element_3");
var nomclien= document.getElementById("element_4");
var dirclien= document.getElementById("element_5");
var email= document.getElementById("element_6");
var telclien= document.getElementById("element_8");
var ingrmen= document.getElementById("element_9");
var valcred = document.getElementById("element_10");
var nomref= document.getElementById("element_11");
var telfref =document.getElementById("element_12");
var estado=document.getElementById("element_13");
var datcrea=document.getElementById("element_14");
var datmodif=document.getElementById("element_15");
var btnConsulta=document.getElementById("consulta");
    idsol.value = solicitud.data.id;
    ciudad.value=solicitud.data.city;
    dep.value=solicitud.data.department;
    nomclien.value=solicitud.data.fullname_client;
    dirclien.value=solicitud.data.address_client;
    email.value=solicitud.data.email;
    telclien.value=solicitud.data.phone_client;
    ingrmen.value=solicitud.data.monthly_income;
    valcred.value=solicitud.data.credit_value;
    nomref.value=solicitud.data.fullname_reference;
    telfref.value=solicitud.data.phone_reference;
    estado.value=solicitud.data.status;
    datcrea.value=solicitud.data.created_at;
    datmodif.value=solicitud.data.updated_at;
    datcrea.disabled=true;
    datmodif.disabled=true;
    idsol.disabled=true;
    // idform.value=id;
    // usuform.value=email;
    // idform.disabled=true;
    // usuform.disabled=true;
}
}
}

function actualizar(){

  var idsol = document.getElementById("element_1");
  var ciudad = document.getElementById("element_7");
  var dep = document.getElementById("element_3");
  var nomclien= document.getElementById("element_4");
  var dirclien= document.getElementById("element_5");
  var email= document.getElementById("element_6");
  var telclien= document.getElementById("element_8");
  var ingrmen= document.getElementById("element_9");
  var valcred = document.getElementById("element_10");
  var nomref= document.getElementById("element_11");
  var telfref =document.getElementById("element_12");
  var estado=document.getElementById("element_13");
  var datcrea=document.getElementById("element_14");
  var datmodif=document.getElementById("element_15");
  var baseurl= "http://127.0.0.1:8000/api/banco/credit/application/update";
console.log("Entra");
var xmlhttp = new XMLHttpRequest();
xmlhttp.open("PUT",baseurl,true);
xmlhttp.setRequestHeader("Content-Type", "application/json");
  var jsonRequest = JSON.stringify({
    "id": idsol.value,
    "city": ciudad.value,
    "department": dep.value,
    "fullname_client": nomclien.value,
    "address_client": dirclien.value,
    "email": email.value,
    "phone_client": telclien.value,
    "monthly_income": ingrmen.value,
    "credit_value": valcred.value,
    "fullname_reference": nomref.value,
    "phone_reference": telfref.value,
    "status": estado.value
});
console.log("jsonRequest "+jsonRequest);
xmlhttp.send(jsonRequest);
xmlhttp.onreadystatechange=function(){
  if (xmlhttp.readyState===4 && xmlhttp.status===200){
  var solicitud = JSON.parse(xmlhttp.responseText);
    var idsol = document.getElementById("element_1");
   window.alert("Solicitud "+idsol.value+" Actualizada Correctamente")
   idsol.value = solicitud.data.id;
   ciudad.value=solicitud.data.city;
   dep.value=solicitud.data.department;
   nomclien.value=solicitud.data.fullname_client;
   dirclien.value=solicitud.data.address_client;
   email.value=solicitud.data.email;
   telclien.value=solicitud.data.phone_client;
   ingrmen.value=solicitud.data.monthly_income;
   valcred.value=solicitud.data.credit_value;
   nomref.value=solicitud.data.fullname_reference;
   telfref.value=solicitud.data.phone_reference;
   estado.value=solicitud.data.status;
   datcrea.value=solicitud.data.created_at;
   datmodif.value=solicitud.data.updated_at;
   console.log("jsonResponse "+JSON.stringify(solicitud));
  }
}

}

function borrar(){
  var idsol = document.getElementById("element_1");
  var ciudad = document.getElementById("element_7");
  var dep = document.getElementById("element_3");
  var nomclien= document.getElementById("element_4");
  var dirclien= document.getElementById("element_5");
  var email= document.getElementById("element_6");
  var telclien= document.getElementById("element_8");
  var ingrmen= document.getElementById("element_9");
  var valcred = document.getElementById("element_10");
  var nomref= document.getElementById("element_11");
  var telfref =document.getElementById("element_12");
  var estado=document.getElementById("element_13");
  var datcrea=document.getElementById("element_14");
  var datmodif=document.getElementById("element_15");
  var baseurl= "http://127.0.0.1:8000/api/banco/data/credit/"+idsol.value;
  var xmlhttp = new XMLHttpRequest();
  xmlhttp.open("DELETE",baseurl,true);
  xmlhttp.send();
  xmlhttp.onreadystatechange=function(){
    if (xmlhttp.readyState===4 && xmlhttp.status===200){
      var solicitud = JSON.parse(xmlhttp.responseText);
      console.log("jsonResponse "+JSON.stringify(solicitud));
      var spaces= "";
      idsol.value = spaces;
      ciudad.value=spaces;
      dep.value=spaces;
      nomclien.value=spaces;
      dirclien.value=spaces;
      email.value=spaces;
      telclien.value=spaces;
      ingrmen.value=spaces;
      valcred.value=spaces;
      nomref.value=spaces;
      telfref.value=spaces;
      estado.value=spaces;
      datcrea.value=spaces;
      datmodif.value=spaces;
      datcrea.disabled=false;
      datmodif.disabled=false;
      idsol.disabled=false;
      window.alert(solicitud.data.message);

    }
}
}

</script>
<!--[if lt IE 9]>
<link rel="stylesheet" href="css/ie-fixes.css">
<![endif]-->
<link rel="stylesheet" type="text/css" href="css/view.css" media="all">
<!-- <script type="text/javascript" src="js/view.js"></script> -->
</head>
<body>
<div class="wrapper">
  <div class="header">
    <div class="row">
      <div class="columns large-12  header-inner"> <a href="index.html"><img src="images/logo.png" alt="" class="logo"></a> </div>
      <div class="columns large-12">
        <nav>
          <section>
            <ul class="sf-menu large-12">
              <li class="active"><a href="index.html">Home</a></li>
              <li><a href="crear.html">Crear Solicitud</a></li>
              <li><a href="actualizar.html">Actualizar Solicitud</a></li>
              <li><a href="consulta.html">Consultar Solicitudes</a></li>
            </ul>
          </section>
        </nav>
      </div>
    </div>

  	<img id="top" src="images/top.png" alt="">
  	<div id="form_container">

  		<h1><a>Untitled Form</a></h1>
  		<form id="form_112522" class="appnitro"  method="post" action="">
  					<div class="form_description">
  			<h2>Actualizar Solicitud</h2>
  			<p>Aca podrá Actualizar su solicitud de crédito</p>
  		</div>
  			<ul >

  					<li id="li_1" >
  		<label class="description" for="element_1">ID Solicitud</label>
  		<div>
  			<input id="element_1" name="element_1" class="element text small" type="text" maxlength="255" value=""/>
  		</div>
  		</li>		<li id="li_2" >
  		<label class="description" for="element_7">Ciudad </label>
  		<div>
  		<select class="element select small" id="element_7" name="element_7">
  			<option value="" selected="selected"></option>
  <option value="Bogotá" >Bogotá</option>
  <option value="Medellin" >Medellin</option>

  		</select>
  		</div>
  		</li>		<li id="li_3" >
  		<label class="description" for="element_3">Departamento </label>
  		<div>
  			<input id="element_3" name="element_3" class="element text medium" type="text" maxlength="255" value=""/>
  		</div>
  		</li>		<li id="li_4" >
  		<label class="description" for="element_4">Nombre Cliente</label>
  		<div>
  			<input id="element_4" name="element_4" class="element text medium" type="text" maxlength="255" value=""/>
  		</div>
  		</li>		<li id="li_5" >
  		<label class="description" for="element_5">Direccion cliente</label>
  		<div>
  			<input id="element_5" name="element_5" class="element text medium" type="text" maxlength="255" value=""/>
  		</div>
  		</li>		<li id="li_6" >
  		<label class="description" for="element_6">Email </label>
  		<div>
  			<input id="element_6" name="element_6" class="element text medium" type="text" maxlength="255" value=""/>
  		</div>
  		</li>
      <li id="li_8" >
  		<label class="description" for="element_8">Telefono Cliente </label>
  		<div>
  			<input id="element_8" name="element_8" class="element text medium" type="text" maxlength="255" value=""/>
  		</div>
  		</li>
      <li id="li_9" >
  		<label class="description" for="element_9">Ingresos Mensuales </label>
  		<div>
  			<input id="element_9" name="element_9" class="element text medium" type="text" maxlength="255" value=""/>
  		</div>
  		</li>
      <li id="li_10" >
  		<label class="description" for="element_10">Valor Credito</label>
  		<div>
  			<input id="element_10" name="element_10" class="element text medium" type="text" maxlength="255" value=""/>
  		</div>
  		</li>
      <li id="li_11" >
      <label class="description" for="element_11">Nombre Referencia</label>
      <div>
        <input id="element_11" name="element_11" class="element text medium" type="text" maxlength="255" value=""/>
      </div>
      </li>
      <li id="li_12" >
      <label class="description" for="element_12">Telefono Referencia</label>
      <div>
        <input id="element_12" name="element_12" class="element text medium" type="text" maxlength="255" value=""/>
      </div>
      </li>
      <li id="li_13" >
      <label class="description" for="element_13">Estado </label>
      <div>
      <select class="element select medium" id="element_13" name="element_13">
        <option value="" selected="selected"></option>
    <option value="Pendiente" >Pendiente</option>
    <option value="En Proceso" >En Proceso</option>
    <option value="Cerrado" >Cerrado</option>

      </select>
      </div>
      </li>
      <li id="li_14" >
      <label class="description" for="element_14">Fecha Creación</label>
      <div>
        <input id="element_14" name="element_14" class="element text medium" type="text" maxlength="255" value=""/>
      </div>
      </li>
      <li id="li_15" >
      <label class="description" for="element_15">Fecha Ultima Actualizacion</label>
      <div>
        <input id="element_15" name="element_15" class="element text medium" type="text" maxlength="255" value=""/>
      </div>
      </li>

  					<li class="buttons">
  			    <input type="hidden" name="form_id" value="112522" />

  				<input id="consulta" type="button" name="submit" value="Consultar"  onclick="consultar()" />
          <input id="actualiza"  type="button" name="submit2" value="Actualizar" onclick="actualizar()" />
          <input id="borra"  type="button" name="submit3" value="Eliminar" onclick="borrar()" />
  		</li>
  			</ul>
  		</form>
  		<div id="footer">
  		</div>
  	</div>
  	<img id="bottom" src="images/bottom.png" alt="">


    <footer class="footer">
      <div class="row">
        <div class="columns large-12 footer-inner">
          <div class="row">
            <div class="columns large-3 box">
              <div class="">
                <h2 class="footer-title">Resources</h2>
                <ul>
                  <li><a href="index.html">home</a></li>
                  <li><a href="gallery.html">gallery</a></li>
                  <li><a href="#">faqs</a></li>
                  <li><a href="contact.html">contact us</a></li>
                  <li><a href="#">testimonials</a></li>
                  <li><a href="blog.html">blog</a></li>
                </ul>
              </div>
            </div>
            <div class="columns large-3 box">
              <div>
                <h2 class="footer-title">links </h2>
                <ul>
                  <li><a href="index.html">home</a></li>
                  <li><a href="gallery.html">gallery</a></li>
                  <li><a href="#">faqs</a></li>
                  <li><a href="contact.html">contact us</a></li>
                  <li><a href="#">testimonials</a></li>
                  <li><a href="blog.html">blog</a></li>
                </ul>
              </div>
            </div>
            <div class="columns large-3 box">
              <div>
                <h2 class="footer-title">follow us</h2>
                <ul>
                  <li><a href="#" class="media tweeter"></a>Follow us on twitter</li>
                  <li><a href="#" class="media youtube"></a>Follow us on youtube</li>
                  <li><a href="#" class="media facebook"></a>Follow us on facebook</li>
                  <li><a href="#" class="media gmail"></a>Follow us on google plus</li>
                </ul>
              </div>
            </div>
            <div class="columns large-3 box">
              <div>
                <h2 class="footer-title">Contact us</h2>
                <p>255, Willson Street,Caulfield, 122211, Melbourne</p>
                <p><b>Tel:</b> (122)3456789, (121)3456079, (121)2341234</p>
                <p><b>Fax:</b> (121)5647289, (122)34526589</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </footer>
    <div class="credit-row">
      <div class="row">
        <div class="columns large-11 credit">&copy; 2045 All rights reserved by <a href="#">DreamzBank.</a> Design by: <a href="http://topwebsitetemplates.org">topwebsitetemplates.org</a></div>
        <div class="columns large-1"><img src="images/toparrow.png" alt="" class="scrollToTop"></div>
      </div>
    </div>
  </div>
</div>
<!-- <script src="js/jquery.min.js"></script>
<script src="js/hoverIntent.js"></script>
<script src="js/superfish.js"></script>
<script src="js/slider/jquery.flexslider.js"></script> -->

</body>
</html>
